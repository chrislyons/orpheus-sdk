<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orpheus SDK - Command Reference</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 1rem 2rem;
            line-height: 1.5;
            font-size: 0.75rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: #fff;
        }

        .subtitle {
            color: #888;
            margin-bottom: 0.75rem;
            font-size: 0.675rem;
        }

        .last-updated {
            color: #666;
            font-size: 0.625rem;
            margin-bottom: 0.75rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #242424;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        thead {
            background: #2a2a2a;
        }

        th {
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: #fff;
            border-bottom: 2px solid #333;
            font-size: 0.75rem;
        }

        th:nth-child(1) { width: 20%; }
        th:nth-child(2) { width: 35%; }
        th:nth-child(3) { width: 45%; }

        td {
            padding: 0.75rem;
            border-bottom: 1px solid #2a2a2a;
            font-size: 0.75rem;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #2a2a2a;
        }

        .command {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Courier New', monospace;
            background: #1a1a1a;
            padding: 0.375rem 0.5rem;
            border-radius: 3px;
            font-size: 0.675rem;
            color: #4fc3f7;
            cursor: pointer;
            display: inline-block;
            transition: background 0.2s;
            position: relative;
        }

        .command:hover {
            background: #222;
        }

        .command:active {
            background: #2a4858;
        }

        .command::after {
            content: 'üìã';
            margin-left: 0.5rem;
            opacity: 0.5;
        }

        .copied {
            animation: flash 0.3s;
        }

        @keyframes flash {
            0%, 100% { background: #1a1a1a; }
            50% { background: #2a5a3a; }
        }

        .description {
            color: #b0b0b0;
            font-size: 0.675rem;
        }

        .job {
            color: #fff;
            font-weight: 500;
            font-size: 0.75rem;
        }

        .section-header {
            background: #2a2a2a;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
            user-select: none;
        }

        .section-header:hover {
            background: #333;
        }

        .section-header:focus {
            outline: 2px solid #4fc3f7;
            outline-offset: -2px;
        }

        .section-header td {
            padding: 0.5rem 0.75rem;
            border-bottom: 2px solid #333;
            position: relative;
            font-size: 0.75rem;
        }

        .section-header td::before {
            content: '‚ñº';
            margin-right: 0.375rem;
            font-size: 0.5625rem;
            transition: transform 0.2s;
            display: inline-block;
        }

        .section-header.collapsed td::before {
            transform: rotate(-90deg);
        }

        .section-row {
            transition: opacity 0.2s;
        }

        .section-row.hidden {
            display: none;
        }

        footer {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #333;
            color: #666;
            font-size: 0.625rem;
        }

        .warning {
            background: #3a2a1a;
            border-left: 3px solid #ff9800;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            border-radius: 3px;
            font-size: 0.675rem;
        }

        .warning-title {
            color: #ff9800;
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-size: 0.75rem;
        }

        .keyboard-hint {
            background: #2a2a2a;
            border-left: 3px solid #4fc3f7;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            border-radius: 3px;
            font-size: 0.675rem;
        }

        .keyboard-hint-title {
            color: #4fc3f7;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Orpheus SDK - Command Reference</h1>
        <p class="subtitle">Quick reference for common development tasks</p>
        <p class="last-updated">Last updated: 2025-10-31</p>
        </div>

        <div class="warning">
            <div class="warning-title">‚ö†Ô∏è Local Use Only</div>
            This page is for local development reference. Click any command to copy it to clipboard.
        </div>

        <table>
            <thead>
                <tr>
                    <th>Job</th>
                    <th>Command</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <!-- Build Commands -->
                <tr class="section-header" data-section="build" tabindex="0">
                    <td colspan="3">Build & Compile</td>
                </tr>
                <tr class="section-row" data-section="build">
                    <td class="job">Configure CMake</td>
                    <td><code class="command">cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug</code></td>
                    <td class="description">Configure CMake build system (Debug mode)</td>
                </tr>
                <tr class="section-row" data-section="build">
                    <td class="job">Configure CMake (Release)</td>
                    <td><code class="command">cmake -S . -B build -DCMAKE_BUILD_TYPE=Release</code></td>
                    <td class="description">Configure CMake build system (Release mode, optimized)</td>
                </tr>
                <tr class="section-row" data-section="build">
                    <td class="job">Build SDK</td>
                    <td><code class="command">cmake --build build</code></td>
                    <td class="description">Build all SDK targets</td>
                </tr>
                <tr class="section-row" data-section="build">
                    <td class="job">Build SDK (parallel)</td>
                    <td><code class="command">cmake --build build -j$(sysctl -n hw.ncpu)</code></td>
                    <td class="description">Build using all CPU cores for faster compilation</td>
                </tr>
                <tr class="section-row" data-section="build">
                    <td class="job">Build Clip Composer</td>
                    <td><code class="command">cmake --build build --target orpheus_clip_composer_app</code></td>
                    <td class="description">Build only the Clip Composer application</td>
                </tr>
                <tr class="section-row" data-section="build">
                    <td class="job">Clean build</td>
                    <td><code class="command">rm -rf build && cmake -S . -B build && cmake --build build</code></td>
                    <td class="description">Full clean rebuild (use when build is corrupted)</td>
                </tr>

                <!-- Test Commands -->
                <tr class="section-header collapsed" data-section="testing" tabindex="0">
                    <td colspan="3">Testing</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Run all tests</td>
                    <td><code class="command">ctest --test-dir build --output-on-failure</code></td>
                    <td class="description">Run all unit and integration tests</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Run tests (verbose)</td>
                    <td><code class="command">ctest --test-dir build --output-on-failure --verbose</code></td>
                    <td class="description">Run tests with detailed output</td>
                </tr>
                <tr class="section-row hidden" data-section="testing">
                    <td class="job">Run specific test</td>
                    <td><code class="command">ctest --test-dir build -R TestName --output-on-failure</code></td>
                    <td class="description">Run only tests matching TestName pattern</td>
                </tr>

                <!-- Run Commands -->
                <tr class="section-header collapsed" data-section="run" tabindex="0">
                    <td colspan="3">Run Applications</td>
                </tr>
                <tr class="section-row hidden" data-section="run">
                    <td class="job">Run Clip Composer</td>
                    <td><code class="command">open build/apps/clip-composer/orpheus_clip_composer_app_artefacts/Debug/OrpheusClipComposer.app</code></td>
                    <td class="description">Launch Clip Composer (macOS Debug build)</td>
                </tr>
                <tr class="section-row hidden" data-section="run">
                    <td class="job">Relaunch Clip Composer (clean)</td>
                    <td><code class="command">./scripts/relaunch-occ.sh</code></td>
                    <td class="description">Clear cache, rebuild, and relaunch Clip Composer (development workflow)</td>
                </tr>

                <!-- Git Commands -->
                <tr class="section-header collapsed" data-section="git" tabindex="0">
                    <td colspan="3">Git Operations</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">Check status</td>
                    <td><code class="command">git status</code></td>
                    <td class="description">View current branch and changed files</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">View diff</td>
                    <td><code class="command">git diff</code></td>
                    <td class="description">See unstaged changes</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">View recent commits</td>
                    <td><code class="command">git log --oneline -10</code></td>
                    <td class="description">Show last 10 commits</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">Fetch updates</td>
                    <td><code class="command">git fetch origin</code></td>
                    <td class="description">Download latest changes from remote (doesn't merge)</td>
                </tr>
                <tr class="section-row hidden" data-section="git">
                    <td class="job">Pull latest</td>
                    <td><code class="command">git pull origin main</code></td>
                    <td class="description">Fetch and merge latest changes from main branch</td>
                </tr>

                <!-- Code Quality -->
                <tr class="section-header collapsed" data-section="quality" tabindex="0">
                    <td colspan="3">Code Quality</td>
                </tr>
                <tr class="section-row hidden" data-section="quality">
                    <td class="job">Format all code</td>
                    <td><code class="command">find src apps -name '*.cpp' -o -name '*.h' | xargs clang-format -i</code></td>
                    <td class="description">Auto-format all C++ source files</td>
                </tr>
                <tr class="section-row hidden" data-section="quality">
                    <td class="job">Check formatting</td>
                    <td><code class="command">find src apps -name '*.cpp' -o -name '*.h' | xargs clang-format --dry-run -Werror</code></td>
                    <td class="description">Verify code formatting without modifying files</td>
                </tr>

                <!-- Documentation -->
                <tr class="section-header collapsed" data-section="docs" tabindex="0">
                    <td colspan="3">Documentation</td>
                </tr>
                <tr class="section-row hidden" data-section="docs">
                    <td class="job">Update this page</td>
                    <td><code class="command">./scripts/update-commands-page.sh</code></td>
                    <td class="description">Regenerate this command reference page</td>
                </tr>
                <tr class="section-row hidden" data-section="docs">
                    <td class="job">Find OCC docs</td>
                    <td><code class="command">ls -1 apps/clip-composer/docs/occ/*.md</code></td>
                    <td class="description">List all Clip Composer design documents</td>
                </tr>
                <tr class="section-row hidden" data-section="docs">
                    <td class="job">View progress</td>
                    <td><code class="command">cat apps/clip-composer/PROGRESS.md</code></td>
                    <td class="description">View Clip Composer implementation progress</td>
                </tr>

                <!-- Diagnostics -->
                <tr class="section-header collapsed" data-section="diagnostics" tabindex="0">
                    <td colspan="3">Diagnostics</td>
                </tr>
                <tr class="section-row hidden" data-section="diagnostics">
                    <td class="job">Check CMake version</td>
                    <td><code class="command">cmake --version</code></td>
                    <td class="description">Verify CMake installation</td>
                </tr>
                <tr class="section-row hidden" data-section="diagnostics">
                    <td class="job">Check build tree</td>
                    <td><code class="command">tree build -L 3 -d</code></td>
                    <td class="description">View build directory structure</td>
                </tr>
                <tr class="section-row hidden" data-section="diagnostics">
                    <td class="job">List build targets</td>
                    <td><code class="command">cmake --build build --target help</code></td>
                    <td class="description">Show all available build targets</td>
                </tr>
            </tbody>
        </table>

        <footer>
            <p><strong>Note:</strong> This is a local reference page. Commands are safe to run in your development environment.</p>
            <p>Generated for: <strong>orpheus-sdk</strong> | Location: <code>~/dev/orpheus-sdk</code></p>
        <p style="margin-top: 1rem;">‚å®Ô∏è <strong>Keyboard Navigation:</strong> Use <strong>‚Üë‚Üì</strong> to navigate sections, <strong>‚Üí</strong> to expand, <strong>‚Üê</strong> to collapse, <strong>Space/Enter</strong> to toggle, <strong>Cmd+Click</strong> to collapse all others.</p>
        </footer>
    </div>

    <script>
        // Click-to-copy functionality
        document.querySelectorAll('.command').forEach(cmd => {
            cmd.addEventListener('click', async function() {
                const text = this.textContent.replace('üìã', '').trim();
                try {
                    await navigator.clipboard.writeText(text);
                    this.classList.add('copied');
                    setTimeout(() => this.classList.remove('copied'), 300);
                } catch (err) {
                    // Fallback for older browsers
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    this.classList.add('copied');
                    setTimeout(() => this.classList.remove('copied'), 300);
                }
            });
        });

        // Section toggle functionality
        const sectionHeaders = document.querySelectorAll('.section-header');

        function toggleSection(header, collapseOthers = false) {
            const section = header.dataset.section;
            const isCollapsed = header.classList.contains('collapsed');

            if (collapseOthers) {
                // Collapse all other sections
                sectionHeaders.forEach(h => {
                    if (h !== header) {
                        h.classList.add('collapsed');
                        document.querySelectorAll(`.section-row[data-section="${h.dataset.section}"]`)
                            .forEach(row => row.classList.add('hidden'));
                    }
                });
            }

            // Toggle current section
            header.classList.toggle('collapsed');
            const rows = document.querySelectorAll(`.section-row[data-section="${section}"]`);
            rows.forEach(row => {
                row.classList.toggle('hidden');
            });
        }

        // Click to toggle
        sectionHeaders.forEach(header => {
            header.addEventListener('click', (e) => {
                toggleSection(header, e.metaKey || e.ctrlKey);
            });
        });

        // Keyboard navigation
        let currentHeaderIndex = -1;
        const headerArray = Array.from(sectionHeaders);

        function focusHeader(index) {
            if (index >= 0 && index < headerArray.length) {
                currentHeaderIndex = index;
                headerArray[index].focus();
                headerArray[index].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        document.addEventListener('keydown', (e) => {
            // Only handle if we're not in an input field
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return;
            }

            // Find currently focused header
            const focusedHeader = document.activeElement;
            if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                currentHeaderIndex = headerArray.indexOf(focusedHeader);
            }

            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    if (currentHeaderIndex < headerArray.length - 1) {
                        focusHeader(currentHeaderIndex + 1);
                    } else if (currentHeaderIndex === -1 && headerArray.length > 0) {
                        focusHeader(0);
                    }
                    break;

                case 'ArrowUp':
                    e.preventDefault();
                    if (currentHeaderIndex > 0) {
                        focusHeader(currentHeaderIndex - 1);
                    } else if (currentHeaderIndex === -1 && headerArray.length > 0) {
                        focusHeader(headerArray.length - 1);
                    }
                    break;

                case 'ArrowRight':
                    // Expand current section
                    if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                        e.preventDefault();
                        if (focusedHeader.classList.contains('collapsed')) {
                            toggleSection(focusedHeader);
                        }
                    }
                    break;

                case 'ArrowLeft':
                    // Collapse current section
                    if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                        e.preventDefault();
                        if (!focusedHeader.classList.contains('collapsed')) {
                            toggleSection(focusedHeader);
                        }
                    }
                    break;

                case ' ':
                case 'Enter':
                    if (focusedHeader && focusedHeader.classList.contains('section-header')) {
                        e.preventDefault();
                        toggleSection(focusedHeader, e.metaKey || e.ctrlKey);
                    }
                    break;
            }
        });

        // Focus first section on page load for immediate keyboard nav
        if (headerArray.length > 0) {
            headerArray[0].focus();
            currentHeaderIndex = 0;
        }
    </script>
</body>
</html>
